"use strict";(self.webpackChunkaprendiendo_js=self.webpackChunkaprendiendo_js||[]).push([[9761],{3905:(e,r,a)=>{a.d(r,{Zo:()=>p,kt:()=>f});var n=a(7294);function t(e,r,a){return r in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function o(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var r=1;r<arguments.length;r++){var a=null!=arguments[r]?arguments[r]:{};r%2?o(Object(a),!0).forEach((function(r){t(e,r,a[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))}))}return e}function l(e,r){if(null==e)return{};var a,n,t=function(e,r){if(null==e)return{};var a,n,t={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],r.indexOf(a)>=0||(t[a]=e[a]);return t}(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],r.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(t[a]=e[a])}return t}var d=n.createContext({}),s=function(e){var r=n.useContext(d),a=r;return e&&(a="function"==typeof e?e(r):i(i({},r),e)),a},p=function(e){var r=s(e.components);return n.createElement(d.Provider,{value:r},e.children)},c="mdxType",u={inlineCode:"code",wrapper:function(e){var r=e.children;return n.createElement(n.Fragment,{},r)}},m=n.forwardRef((function(e,r){var a=e.components,t=e.mdxType,o=e.originalType,d=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),c=s(a),m=t,f=c["".concat(d,".").concat(m)]||c[m]||u[m]||o;return a?n.createElement(f,i(i({ref:r},p),{},{components:a})):n.createElement(f,i({ref:r},p))}));function f(e,r){var a=arguments,t=r&&r.mdxType;if("string"==typeof e||t){var o=a.length,i=new Array(o);i[0]=m;var l={};for(var d in r)hasOwnProperty.call(r,d)&&(l[d]=r[d]);l.originalType=e,l[c]="string"==typeof e?e:t,i[1]=l;for(var s=2;s<o;s++)i[s]=a[s];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},4595:(e,r,a)=>{a.r(r),a.d(r,{assets:()=>d,contentTitle:()=>i,default:()=>u,frontMatter:()=>o,metadata:()=>l,toc:()=>s});var n=a(7462),t=(a(7294),a(3905));const o={title:"Middlewares a nivel de ruta",slug:"/route-level-middleware",sidebar_position:6},i=void 0,l={unversionedId:"modulo06/route-midd",id:"modulo06/route-midd",title:"Middlewares a nivel de ruta",description:"Adem\xe1s de poder aplicar middlewares a nivel de aplicaci\xf3n y a nivel de enrutador, tambi\xe9n es posible aplicarlos a nivel de ruta. Esto nos permite definir un middleware espec\xedfico para una ruta determinada.",source:"@site/docs/modulo06/route-midd.md",sourceDirName:"modulo06",slug:"/route-level-middleware",permalink:"/backend-nodejs-mongodb/route-level-middleware",draft:!1,editUrl:"https://github.com/ashel1806/backend-nodejs-mongodb/tree/main/docs/modulo06/route-midd.md",tags:[],version:"current",sidebarPosition:6,frontMatter:{title:"Middlewares a nivel de ruta",slug:"/route-level-middleware",sidebar_position:6},sidebar:"tutorialSidebar",previous:{title:"Middlewares a nivel de enrutador",permalink:"/backend-nodejs-mongodb/router-level-middlewares"},next:{title:"Orden de ejecuci\xf3n",permalink:"/backend-nodejs-mongodb/order-execution"}},d={},s=[{value:"\xbfC\xf3mo se aplican?",id:"c\xf3mo-se-aplican",level:2},{value:"Ejemplo de middleware para validad par\xe1metros",id:"ejemplo-de-middleware-para-validad-par\xe1metros",level:2}],p={toc:s},c="wrapper";function u(e){let{components:r,...a}=e;return(0,t.kt)(c,(0,n.Z)({},p,a,{components:r,mdxType:"MDXLayout"}),(0,t.kt)("p",null,"Adem\xe1s de poder aplicar middlewares a nivel de aplicaci\xf3n y a nivel de enrutador, tambi\xe9n es posible aplicarlos a nivel de ruta. Esto nos permite definir un middleware espec\xedfico para una ruta determinada."),(0,t.kt)("p",null,"Aplicar un middleware a nivel de ruta significa que ese middleware se ejecutar\xe1 solo para las solicitudes que coincidan con esa ruta espec\xedfica. De esta manera, podemos definir middlewares personalizados para manejar solicitudes espec\xedficas de manera m\xe1s precisa."),(0,t.kt)("h2",{id:"c\xf3mo-se-aplican"},"\xbfC\xf3mo se aplican?"),(0,t.kt)("p",null,"Para aplicar un middleware a nivel de ruta en Express, simplemente necesitamos pasar como argumento el middleware deseado a la definici\xf3n de la ruta usando el m\xe9todo get(), post(), put() o delete(), seg\xfan corresponda."),(0,t.kt)("p",null,"Por ejemplo, para registrar los logs de solo una ruta en espec\xedfico, podemos hacer lo siguiente:"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="routes/usuarios.js"',title:'"routes/usuarios.js"'},"const express = require('express');\nconst app = express();\n\nconst loggerMiddleware = (req, res, next) => {\n  console.log('Solicitud recibida en la ruta ' + req.path);\n  next();\n};\n\n// usamos el middleware solo para la ruta /ruta-elegida\napp.get('/ruta-elegida', loggerMiddleware, (req, res) => {\n  // L\xf3gica de la ruta\n});\n")),(0,t.kt)("p",null,"Los ejemplos m\xe1s comunes para este tipo de middlewares son los middlewares de validaci\xf3n de datos, los middlewares de autenticaci\xf3n y middlewares de validaci\xf3n de par\xe1metros."),(0,t.kt)("h2",{id:"ejemplo-de-middleware-para-validad-par\xe1metros"},"Ejemplo de middleware para validad par\xe1metros"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-js"},"const express = require('express');\nconst app = express();\n\nconst validateParamsMiddleware = (req, res, next) => {\n  // Extraemos los par\xe1metros\n  const { param1, param2 } = req.query;\n\n  // Validamos los par\xe1metros\n  if (!param1 || !param2) {\n    // Si faltan par\xe1metros, respondemos con un error y no llamamos a next()\n    return res.status(400).send('Faltan par\xe1metros');\n  }\n\n  // Si los par\xe1metros son v\xe1lidos, llamamos a next()\n  next();\n};\n\napp.get('/ruta-validada', validateParamsMiddleware, (req, res) => {\n  // L\xf3gica de la ruta validada\n});\n")))}u.isMDXComponent=!0}}]);