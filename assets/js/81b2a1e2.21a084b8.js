"use strict";(self.webpackChunkaprendiendo_js=self.webpackChunkaprendiendo_js||[]).push([[5788],{3905:(e,n,a)=>{a.d(n,{Zo:()=>p,kt:()=>g});var r=a(7294);function i(e,n,a){return n in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a,e}function s(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),a.push.apply(a,r)}return a}function t(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?s(Object(a),!0).forEach((function(n){i(e,n,a[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))}))}return e}function o(e,n){if(null==e)return{};var a,r,i=function(e,n){if(null==e)return{};var a,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)a=s[r],n.indexOf(a)>=0||(i[a]=e[a]);return i}(e,n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],n.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}var l=r.createContext({}),d=function(e){var n=r.useContext(l),a=n;return e&&(a="function"==typeof e?e(n):t(t({},n),e)),a},p=function(e){var n=d(e.components);return r.createElement(l.Provider,{value:n},e.children)},c="mdxType",u={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},m=r.forwardRef((function(e,n){var a=e.components,i=e.mdxType,s=e.originalType,l=e.parentName,p=o(e,["components","mdxType","originalType","parentName"]),c=d(a),m=i,g=c["".concat(l,".").concat(m)]||c[m]||u[m]||s;return a?r.createElement(g,t(t({ref:n},p),{},{components:a})):r.createElement(g,t({ref:n},p))}));function g(e,n){var a=arguments,i=n&&n.mdxType;if("string"==typeof e||i){var s=a.length,t=new Array(s);t[0]=m;var o={};for(var l in n)hasOwnProperty.call(n,l)&&(o[l]=n[l]);o.originalType=e,o[c]="string"==typeof e?e:i,t[1]=o;for(var d=2;d<s;d++)t[d]=a[d];return r.createElement.apply(null,t)}return r.createElement.apply(null,a)}m.displayName="MDXCreateElement"},2218:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>l,contentTitle:()=>t,default:()=>u,frontMatter:()=>s,metadata:()=>o,toc:()=>d});var r=a(7462),i=(a(7294),a(3905));const s={title:"Middlewares a nivel de aplicaci\xf3n",slug:"/app-level-middlewares",sidebar_position:4},t=void 0,o={unversionedId:"modulo06/app-midd",id:"modulo06/app-midd",title:"Middlewares a nivel de aplicaci\xf3n",description:"En Express, los middlewares tambi\xe9n se pueden aplicar a nivel de aplicaci\xf3n. Esto significa que el middleware se ejecutar\xe1 para todas las solicitudes que lleguen a la aplicaci\xf3n, independientemente de la ruta especificada.",source:"@site/docs/modulo06/app-midd.md",sourceDirName:"modulo06",slug:"/app-level-middlewares",permalink:"/backend-nodejs-mongodb/app-level-middlewares",draft:!1,editUrl:"https://github.com/ashel1806/backend-nodejs-mongodb/tree/main/docs/modulo06/app-midd.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{title:"Middlewares a nivel de aplicaci\xf3n",slug:"/app-level-middlewares",sidebar_position:4},sidebar:"tutorialSidebar",previous:{title:"Personalizando middlewares",permalink:"/backend-nodejs-mongodb/custom-middlewares"},next:{title:"Middlewares a nivel de enrutador",permalink:"/backend-nodejs-mongodb/router-level-middlewares"}},l={},d=[],p={toc:d},c="wrapper";function u(e){let{components:n,...a}=e;return(0,i.kt)(c,(0,r.Z)({},p,a,{components:n,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"En Express, los middlewares tambi\xe9n se pueden aplicar a nivel de aplicaci\xf3n. Esto significa que el middleware se ejecutar\xe1 para todas las solicitudes que lleguen a la aplicaci\xf3n, independientemente de la ruta especificada."),(0,i.kt)("p",null,"Para aplicar un middleware a nivel de aplicaci\xf3n, tambi\xe9n se utiliza la funci\xf3n ",(0,i.kt)("inlineCode",{parentName:"p"},"app.use()"),". Esta funci\xf3n acepta un middleware como argumento y lo registra para que se ejecute en cada solicitud entrante."),(0,i.kt)("p",null,"Un ejemplo de middleware a nivel de apliaci\xf3n es el middleware ",(0,i.kt)("inlineCode",{parentName:"p"},"express.json()"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"const express = require('express');\nconst app = express();\n\n// Middleware a nivel de aplicaci\xf3n\napp.use(express.json());\n\napp.get('/usuarios', (req, res) => {\n  // ...\n});\n\napp.post('/usuarios', (req, res) => {\n  // ...\n});\n\napp.listen(3000, () => {\n  console.log('Servidor iniciado en el puerto 3000');\n});\n")),(0,i.kt)("p",null,"En este ejemplo, el middleware ",(0,i.kt)("inlineCode",{parentName:"p"},"express.json()")," se ha aplicado a nivel de aplicaci\xf3n utilizando ",(0,i.kt)("inlineCode",{parentName:"p"},"app.use()"),". Esto significa que se ejecutar\xe1 para todas las solicitudes entrantes, independientemente de la ruta especificada."),(0,i.kt)("p",null,"Adem\xe1s del middleware ",(0,i.kt)("inlineCode",{parentName:"p"},"express.json()"),", tambi\xe9n se pueden aplicar otros middlewares a nivel de aplicaci\xf3n en Express. Dos ejemplos comunes son los middlewares de logger y los middlewares de gesti\xf3n de cookies y sesiones."),(0,i.kt)("p",null,"El middleware de logger registra informaci\xf3n sobre cada solicitud entrante, como la URL solicitada, el m\xe9todo HTTP utilizado y el tiempo que tard\xf3 en procesarse la solicitud. Para utilizar el middleware de logger en Express, se puede utilizar el paquete morgan. Por ejemplo:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"const express = require('express');\nconst morgan = require('morgan');\n\nconst app = express();\n\n// Middleware de logger a nivel de aplicaci\xf3n\napp.use(morgan('dev'));\n\napp.get('/usuarios', (req, res) => {\n  // ...\n});\n\napp.post('/usuarios', (req, res) => {\n  // ...\n});\n\napp.listen(3000, () => {\n  console.log('Servidor iniciado en el puerto 3000');\n});\n")),(0,i.kt)("p",null,"En este ejemplo, el middleware de logger ",(0,i.kt)("inlineCode",{parentName:"p"},"morgan('dev')")," se ha aplicado a nivel de aplicaci\xf3n utilizando ",(0,i.kt)("inlineCode",{parentName:"p"},"app.use()"),". Esto significa que se registrar\xe1 informaci\xf3n sobre cada solicitud entrante."),(0,i.kt)("p",null,"El middleware de gesti\xf3n de cookies y sesiones se utiliza para gestionar las cookies y las sesiones de los usuarios. En Express, el middleware de gesti\xf3n de cookies se proporciona a trav\xe9s del paquete ",(0,i.kt)("inlineCode",{parentName:"p"},"cookie-parser"),", mientras que el middleware de gesti\xf3n de sesiones se proporciona a trav\xe9s del paquete ",(0,i.kt)("inlineCode",{parentName:"p"},"express-session"),". Por ejemplo:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"const express = require('express');\nconst cookieParser = require('cookie-parser');\nconst session = require('express-session');\n\nconst app = express();\n\n// Middleware de gesti\xf3n de cookies a nivel de aplicaci\xf3n\napp.use(cookieParser());\n\n// Middleware de gesti\xf3n de sesiones a nivel de aplicaci\xf3n\napp.use(session({\n  secret: 'mi-secreto',\n  resave: false,\n  saveUninitialized: true,\n}));\n\napp.get('/usuarios', (req, res) => {\n  // ...\n});\n\napp.post('/usuarios', (req, res) => {\n  // ...\n});\n\napp.listen(3000, () => {\n  console.log('Servidor iniciado en el puerto 3000');\n});\n")),(0,i.kt)("p",null,"En este ejemplo, el middleware de gesti\xf3n de cookies ",(0,i.kt)("inlineCode",{parentName:"p"},"cookie-parser")," y el middleware de gesti\xf3n de sesiones ",(0,i.kt)("inlineCode",{parentName:"p"},"express-session")," se han aplicado a nivel de aplicaci\xf3n utilizando ",(0,i.kt)("inlineCode",{parentName:"p"},"app.use()"),"."),(0,i.kt)("p",null,"As\xed como se pueden implementar middlewares de terceros a nivel de aplicaci\xf3n, nosotros mismos tambi\xe9n podemos crear nuestros propios middlewares para que se ejecuten a nivel de aplicaci\xf3n, como el middleware de autenticaci\xf3n o de validaci\xf3n de datos."))}u.isMDXComponent=!0}}]);